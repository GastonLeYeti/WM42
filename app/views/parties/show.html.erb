<div
  class="d-none"
  data-controller='hello'
  data-hello-generate-value="<%= @needs_maze_generation %>"
  data-hello-maps-value="<%= @map_ids.to_json %>"
>

  <div id="maze_container_0"></div>
  <div id="maze_container_1"></div>
  <div id="maze_container_2"></div>
</div>


<%= render "composants/navbar" %>
<div class="container">
  <%= render "composants/header_parties" %>
  <div class="row nav-dashboard" id="nav-dashboard">
    <div class="col s12 nav-dashboard-tabs">

      <%= link_to party_path(@party) do %>
        <span class="nav-active" id="nav-bible"><i class="fa-solid fa-star nav-star"></i>Bible</span>
      <% end %>
      <%= link_to party_maps_path(@party) do %>
        <span class="nav-maps" id="nav-map"><i class="fa-regular fa-star nav-star"></i>Map</span>
      <% end %>
      <%= link_to party_players_path(@party) do %>
        <span class="nav-players" id="nav-players"><i class="fa-regular fa-star nav-star"></i>Players</span>
      <% end %>
      <%= link_to party_weapons_path(@party) do %>
        <span class="nav-weapons" id="nav-weapons"><i class="fa-regular fa-star nav-star"></i>Weapons</span>
      <% end %>
      <%= link_to party_pnjs_path(@party) do %>
        <span class="nav-pnj" id="nav-pnj"><i class="fa-regular fa-star nav-star"></i>PNJ</span>
      <% end %>
      <%= link_to party_creatures_path(@party) do %>
      <span class="nav-creatures" id="nav-creatures"><i class="fa-regular fa-star nav-star"></i>Creatures</span>
      <% end %>
    </div>
  </div>


    <div class="row row_bible">
      <div class="col s8 bible" id="bible">
        <div class="row">
          <div class="col s12 bible_title">
            <h2>Ma bible</h2>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <p class="bible_text"><%= @party.bible.gsub(/\/n/, "<br><br>").html_safe %></p>
          </div>
        </div>
      </div>
      <div class="col s4">
        <div class="row">
          <div class="col s12">
            <div class="card blue-grey lighten-1 recap-univers">
              <div class="content_sub_info">
                <div class="card-content white-text">
                  <span class="card-title">Univers #<%= @party.id %></span>
                  <div class="univers-content">
                    <div class="row recap-line">
                      <i class="material-icons white-text">language</i>
                      <span class="dashline"></span>
                      <span class="univers-name"><%= @party.universe.name %></span>
                    </div>
                    <div class="row recap-line">
                      <i class="material-icons white-text">face</i>
                      <span class="dashline"></span>
                      <% players_array = [] %>
                      <% (1..10).each do |i| %>
                      <% if  @party.send("player_#{i}") != nil %>
                        <% if  @party.send("player_#{i}") != '' %>
                          <% players_array << @party.send("player_#{i}") %>
                          <% end  %>
                          <% end  %>
                          <% end  %>
                      <span class="univers-name"><%= players_array.length %> <%= 'Player'.pluralize(players_array.length) %> </span>
                    </div>
                    <% @party.maps.each do |map| %>
                      <div class="row recap-line">
                        <i class="material-icons white-text">directions</i>
                        <span class="dashline"></span>
                        <span class="univers-name">
                            <%= map.name %>
                        </span>
                      </div>
                    <% end %>
                    <div class="row recap-line">
                      <i class="material-icons white-text">multiline_chart</i>
                      <span class="dashline"></span>
                      <span class="univers-name"><%= @party.universe_id %></span>
                    </div>
                    <div class="row recap-line">
                      <i class="material-icons white-text">details</i>
                      <span class="dashline"></span>
                      <span class="univers-name">Nope</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col s12">
            <div class="card blue-grey lighten-1 recap-univers">
              <div class="card-content white-text">
                <span class="card-title"><%= 'Player'.pluralize(players_array.length) %></span>
                <div class="players-content">

                <% players_array.each do | player |  %>
                  <div class="row player">
                    <img src="https://directemployers.org/wp-content/uploads/2018/08/avatar-JohnDoe.jpg" class="avatar" alt="Contact Person">
                    <span><%= player.capitalize %></span>
                  </div>
                <% end %>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
